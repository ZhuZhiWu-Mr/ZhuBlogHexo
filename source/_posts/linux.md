---
title: linux操作宝典 
date: 2021-04-03 14:33:15
tags: Linux
categories: linux
cover: /images/banners/VCG211284641681.jpg
---



## 按内容搜索所有文件

```
grep -rn "hello,world!" *
```

	* 表示当前目录所有文件，也可以是某个文件名
	-r 是递归查找
	-n 是显示行号
	-R 查找所有文件包含子目录
	-i 忽略大小写
	-l 只列出匹配的文件名
	-L 列出不匹配的文件名
	-w 只匹配整个单词，而不是字符串的一部分（匹配 hello，不匹配helloo）



## 排查内存占用

### 1.排查磁盘满的节点，执行以下命令：

```
df -h
```

### 2.进入df -h查出的异常分区，执行以下命令，逐层往下找出耗磁盘的目录。


```
du -sh * | grep G
```

### 3.进入消耗磁盘的目录，找出消耗磁盘空间的异常文件，执行命令：

```
du -sh * | grep G 或者 du -sh * | grep T
```

### 4.删除查找出来的异常文件命令：

```
rm -rf 文件名
```

### 5.如果上面找不出异常文件消耗磁盘空间，有可能是已删除文件但未释放内存，占用了很大的空间，执行命令：


```
lsof -n | grep delete
```

### 6.找出已删除的文件但未释放内存的进程，然后释放进程。


```
kill -9 进程号
```